

<!DOCTYPE html>
<html class="no-js" lang="en">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title> Configuration | Scylla Docs
    </title>
    <meta name="description" content="Scylla is an Apache Cassandra-compatible NoSQL data store that can handle 1 million transactions per second on a single server." />
    <link
      rel="icon"
      href="../../../_static/img/favicon.ico"
      type="image/x-icon"
    />
    <link
      rel="icon"
      href="../../../_static/img/favicon-32x32.png"
      sizes="32x32"
    />
    <link
      rel="icon"
      href="../../../_static/img/favicon-228x228.png"
      sizes="192x192"
    />
    <link
      rel="apple-touch-icon"
      href="../../../_static/img/favicon-228x228.png"
    />
    <meta
      name="msapplication-TileImage"
      href="../../../_static/img/favicon-228x228.png"
    />
    <link rel="canonical" href="https://docs.scylladb.com/" />
    <link rel="author" href="mailto:info@scylladb.com" />
  <!-- connect to domain of font files -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

  <!-- optionally increase loading priority -->
  <link
    rel="preload"
    as="style"
    href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap"
  />

  <!-- async CSS -->
  <link
    rel="stylesheet"
    media="print"
    onload="this.onload=null;this.removeAttribute('media');"
    href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap"
  />

  <!-- no-JS fallback -->
  <noscript>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap"
    />
  </noscript>
  <link
    rel="stylesheet"
    href="../../../_static/css/main.css"
    type="text/css"
  />
  <link
    rel="stylesheet"
    href="../../../_static/pygments.css"
    type="text/css"
  /> <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />

  <script
    type="text/javascript"
    id="documentation_options"
    data-url_root="../../../"
    src="../../../_static/documentation_options.js"
  ></script>
  <script
    type="text/javascript"
    src="../../../_static/js/runtime.bundle.js"
  ></script>
  <script
    type="text/javascript"
    src="../../../_static/js/main.bundle.js"
  ></script> <script src="../../../_static/underscore.js"></script> <script src="../../../_static/doctools.js"></script> <script src="../../../_static/language_data.js"></script> <script src="../../../_static/clipboard.min.js"></script> <script src="../../../_static/copybutton.js"></script>

    <!-- Google Tag Manager -->
    <script>
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, "script", "dataLayer", "GTM-T8P2JP");
    </script>
    <!-- End Google Tag Manager -->
    <!-- Marketo -->
    <script type="text/javascript">
      (function () {
        var didInit = false;
        function initMunchkin() {
          if (didInit === false) {
            didInit = true;
            Munchkin.init("791-QBF-350");
          }
        }
        var s = document.createElement("script");
        s.type = "text/javascript";
        s.async = true;
        s.src = "//munchkin.marketo.net/munchkin.js";
        s.onreadystatechange = function () {
          if (this.readyState == "complete" || this.readyState == "loaded") {
            initMunchkin();
          }
        };
        s.onload = initMunchkin;
        document.getElementsByTagName("head")[0].appendChild(s);
      })();
    </script>
    <!-- End Marketo -->
    <!-- Expertrec -->
    <script>
      var id = "e2077224-9ccf-11e9-a0c9-0242ac130002";
      var ci_search = document.createElement("script");
      ci_search.type = "text/javascript";
      ci_search.async = true;
      ci_search.src = "https://cse.expertrec.com/api/js/ci_common.js?id=" + id;
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(ci_search, s);
    </script>
    <!-- End Expertrec -->

    <!-- Font Awesome -->
    <script
      src="https://kit.fontawesome.com/b1870adf6a.js"
      crossorigin="anonymous"
    ></script>
    <!-- End Font Awesome -->
  </head>
  
  <body>
     <header class="header">
  <div class="header-logo">
    <a class="header-logo__img" href="https://scylladb.com/">
      <img
        src="../../../_static/img/logo-scylla-docs.svg"
        alt="Scylla Documentation Logo"
      />
    </a>
    <span class="header-logo__bar"></span>
    <a class="header-logo__text" href="https://docs.scylladb.com/">
      Documentation
    </a>
  </div>
  <div class="header-navigation">
    <ul
      class="dropdown menu scylla-dropdown scylla-dropdown--header"
      data-dropdown-menu
    >
      <li class="scylla-dropdown__item">
        <a href="#" class="scylla-dropdown__title"
          >Server <i class="chevron scylla-icon scylla-icon--triangle-down"></i
        ></a>
        <ul class="menu scylla-dropdown__content">
          <li>
            <a href="https://docs.scylladb.com/"
              ><i class="scylla-icon scylla-icon--about-us"></i>Scylla Open
              Source</a
            >
          </li>
          <li>
            <a href="https://docs.scylladb.com/"
              ><i class="scylla-icon scylla-icon--enterprise"></i>Scylla
              Enterprise</a
            >
          </li>
          <li>
            <a
              href="https://scylla.docs.scylladb.com/master/alternator/alternator.html"
            >
              <i class="scylla-icon scylla-icon--overview"></i>Scylla
              Alternator</a
            >
          </li>
        </ul>
      </li>
      <li class="scylla-dropdown__item">
        <a href="#" class="scylla-dropdown__title"
          >Cloud <i class="chevron scylla-icon scylla-icon--triangle-down"></i
        ></a>
        <ul class="menu scylla-dropdown__content">
          <li>
            <a href="https://cloud.scylladb.com/">
              <i class="scylla-icon scylla-icon--cloud"></i>Scylla Cloud</a
            >
          </li>
          <li>
            <a href="https://docs.scylladb.com/scylla-cloud/">
              <i class="scylla-icon scylla-icon--cloud-docs"></i>Scylla Cloud
              Docs</a
            >
          </li>
        </ul>
      </li>
      <li class="scylla-dropdown__item">
        <a href="#" class="scylla-dropdown__title"
          >Tools <i class="chevron scylla-icon scylla-icon--triangle-down"></i
        ></a>
        <ul class="menu scylla-dropdown__content">
          <li>
            <a href="https://manager.docs.scylladb.com/">
              <i class="scylla-icon scylla-icon--manager"></i>Scylla Manager</a
            >
          </li>
          <li>
            <a href="https://monitoring.docs.scylladb.com/">
              <i class="scylla-icon scylla-icon--monitoring"></i>Scylla
              Monitoring Stack</a
            >
          </li>
          <li>
            <a href="https://operator.docs.scylladb.com/">
              <i class="scylla-icon scylla-icon--operator"></i>Scylla Operator
            </a>
          </li>
        </ul>
      </li>
      <li class="scylla-dropdown__item">
        <a href="#" class="scylla-dropdown__title"
          >Drivers <i class="chevron scylla-icon scylla-icon--triangle-down"></i
        ></a>
        <ul class="menu scylla-dropdown__content">
          <li>
            <a
              href="https://docs.scylladb.com/using-scylla/drivers/cql-drivers/"
            >
              <i class="scylla-icon scylla-icon--nsql-guides"></i>CQL Drivers
            </a>
          </li>
          <li>
            <a
              href="https://docs.scylladb.com/using-scylla/drivers/dynamo-drivers/"
            >
              <i class="scylla-icon scylla-icon--overview"></i>DynamoDB Drivers
            </a>
          </li>
        </ul>
      </li>
    </ul>
    <div class="header-button">
      <a href="https://www.scylladb.com/download/" class="button">Download</a>
    </div>
  </div>
  <div class="header-search-box">
    <div class="search-box">
      <ci-search></ci-search>
    </div>
  </div>
  <div class="side-nav-toggle" data-toggle="side-nav">
  <div class="side-nav-toggle__button">
    <img src="../../../_static/img/menu.svg" alt="Menu" />
  </div>
</div>
</header>
    <section class="layout ">
      <div class="content large-order-2">
         

        <div class="admonition caution">
          <p class="admonition-title">Caution</p>
          <p>
            You are not reading the latest stable version of this documentation.
            If you want up-to-date information, please have a look at
            <a href="../../../../stable/index.html">
               3.10.2.x</a
            >.
          </p>
        </div>
        

        <div class="pre-content">
          <div class="pre-content__left"><div class="breadcrumbs">
  <span class="bread__item">
    <a
      href="https://java-driver.docs.scylladb.com"
      class="bread__highlight"
    >
      <i class="fas fa-home"></i> Scylla Java Driver</a
    ></span
  >
  
  <span class="bread__item"
    ><a href="../../index.html">Upgrade guide</a></span
  >
  
  <span class="bread__item"
    ><a href="../index.html">Migrating from Astyanax</a></span
  >
  
  <span class="bread__item bread__item--last">Configuration</span>
</div></div>
          <div class="pre-content__right"><ul
  class="dropdown menu scylla-dropdown scylla-dropdown--contribute"
  data-dropdown-menu
>
  <li class="scylla-dropdown__item">
    <a class="scylla-dropdown__title" href="#">
      <div class="scylla-dropdown__title--body">
        <i class="icon fa fa-github" aria-hidden="true"></i>
        Contribute
      </div>
      <i class="chevron scylla-icon scylla-icon--chevron-right"></i>
    </a>
    <ul class="menu scylla-dropdown__content">
      <li>
        <a
          href="https://github.com/scylladb/java-driver/issues/new?title=Issue in page Configuration&&body=I%20would%20like%20to%20report%20an%20issue%20in%20page%20https://java-driver.docs.scylladb.com/scylla-3.7.2.x/upgrade_guide/migrating_from_astyanax/configuration/index%0A%0A%23%23%23%20Problem%0A%0A%23%23%23%20%20Suggest%20a%20fix"
          target="_blank"
          >Report a doc issue
          <i class="icon fa fa-external-link" aria-hidden="true"></i
        ></a>
      </li>
      
      <li>
             
        <a
          href="https://github.com/scylladb/java-driver/edit/scylla-3.7.2.x/docs/source/upgrade_guide/migrating_from_astyanax/configuration/index.md"
          target="_blank"
          >Edit this page
          <i class="icon fa fa-external-link" aria-hidden="true"></i
        ></a>
      </li>
      
      <li>
        <a href="https://docs.scylladb.com/contribute/" target="_blank"
          >Learn how to contribute
          <i class="icon fa fa-external-link" aria-hidden="true"></i
        ></a>
      </li>
    </ul>
  </li>
</ul></div>
        </div>
         <div class="section" id="configuration">
<h1>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h1>
<div class="section" id="how-configuring-the-java-driver-works">
<h2>How Configuring the Java driver works<a class="headerlink" href="#how-configuring-the-java-driver-works" title="Permalink to this headline">¶</a></h2>
<p>The two basic components in the Java driver are the <code class="docutils literal notranslate"><span class="pre">Cluster</span></code> and the <code class="docutils literal notranslate"><span class="pre">Session</span></code>.
The <code class="docutils literal notranslate"><span class="pre">Cluster</span></code> is the object to create first, and on to which all global configurations
apply. Connecting to the <code class="docutils literal notranslate"><span class="pre">Cluster</span></code> creates a <code class="docutils literal notranslate"><span class="pre">Session</span></code>. Queries are executed
through the <code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Cluster</span></code> object then is to be viewed as the equivalent of the <code class="docutils literal notranslate"><span class="pre">AstyanaxContext</span></code>
object. “Starting” an <code class="docutils literal notranslate"><span class="pre">AstyanaxContext</span></code> object typically returns a <code class="docutils literal notranslate"><span class="pre">Keyspace</span></code>
object, the <code class="docutils literal notranslate"><span class="pre">Keyspace</span></code> object is the equivalent of the <em>Java driver</em>’s <code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<p>Configuring a <code class="docutils literal notranslate"><span class="pre">Cluster</span></code> works with the <em>Builder</em> pattern. The <code class="docutils literal notranslate"><span class="pre">Builder</span></code> takes all
the configurations into account before building the <code class="docutils literal notranslate"><span class="pre">Cluster</span></code>.</p>
<p>Following are some examples of the most important configurations that were
possible with <em>Astyanax</em> and how to translate them into <em>DataStax Java driver</em>
configurations. Please note that the Java driver has been optimized to handle most use
cases at best and even though the following sections show how to tune some various
options, the driver should provide the best performances with the default configurations
and these options should not be changed unless there is a good reason to.</p>
</div>
<div class="section" id="connection-pools">
<h2>Connection pools<a class="headerlink" href="#connection-pools" title="Permalink to this headline">¶</a></h2>
<p>Configuration of connection pools in <em>Astyanax</em> are made through the
<code class="docutils literal notranslate"><span class="pre">ConnectionPoolConfigurationImpl</span></code>. This object gathers important configurations
that the <em>Java driver</em> has categorized in multiple <em>Option</em> and <em>Policy</em> kinds.</p>
<div class="section" id="connections-pools-internals">
<h3>Connections pools internals<a class="headerlink" href="#connections-pools-internals" title="Permalink to this headline">¶</a></h3>
<p>Everything concerning the internal pools of connections to the <em>Cassandra nodes</em>
will be gathered in the Java driver in the <a class="reference external" href="../../../manual/pooling"><code class="docutils literal notranslate"><span class="pre">PoolingOptions</span></code></a>:</p>
<p><em>Astyanax</em>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">ConnectionPoolConfigurationImpl</span> <span class="n">cpool</span> <span class="o">=</span>
       <span class="k">new</span> <span class="n">ConnectionPoolConfigurationImpl</span><span class="o">(</span><span class="s">&quot;myConnectionPool&quot;</span><span class="o">)</span>
               <span class="o">.</span><span class="na">setInitConnsPerHost</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span>
               <span class="o">.</span><span class="na">setMaxConnsPerHost</span><span class="o">(</span><span class="mi">3</span><span class="o">)</span>
</pre></div>
</div>
<p><em>Java driver</em>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">PoolingOptions</span> <span class="n">poolingOptions</span> <span class="o">=</span>
       <span class="k">new</span> <span class="n">PoolingOptions</span><span class="o">()</span>
           <span class="o">.</span><span class="na">setConnectionsPerHost</span><span class="o">(</span><span class="n">HostDistance</span><span class="o">.</span><span class="na">LOCAL</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span>
</pre></div>
</div>
<p>The first number is the initial number of connections, the second is the maximum number
of connections the driver is allowed to create for each host.</p>
<p>Note that the <em>Java driver</em> allows multiple simultaneous requests on one single
connection, as it is based upon the <a class="reference external" href="../../../manual/native_protocol"><em>Native protocol</em></a>,
an asynchronous binary protocol that can handle up to 32768 simultaneous requests on a
single connection. The Java driver is able to manage and distribute simultaneous requests
by itself even under high contention, and changing the default <code class="docutils literal notranslate"><span class="pre">PoolingOptions</span></code> is not
necessary most of the time except for very <a class="reference external" href="../../../manual/pooling/#tuning-protocol-v3-for-very-high-throughputs">specific use cases</a>.</p>
</div>
<div class="section" id="timeouts">
<h3>Timeouts<a class="headerlink" href="#timeouts" title="Permalink to this headline">¶</a></h3>
<p>Timeouts concerning requests, or connections will be part of the <code class="docutils literal notranslate"><span class="pre">SocketOptions</span></code>.</p>
<p><em>Astyanax</em>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">ConnectionPoolConfigurationImpl</span> <span class="n">cpool</span> <span class="o">=</span>
       <span class="k">new</span> <span class="n">ConnectionPoolConfigurationImpl</span><span class="o">(</span><span class="s">&quot;myConnectionPool&quot;</span><span class="o">)</span>
               <span class="o">.</span><span class="na">setSocketTimeout</span><span class="o">(</span><span class="mi">3000</span><span class="o">)</span>
               <span class="o">.</span><span class="na">setConnectTimeout</span><span class="o">(</span><span class="mi">3000</span><span class="o">)</span>
</pre></div>
</div>
<p><em>Java Driver:</em></p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">SocketOptions</span> <span class="n">so</span> <span class="o">=</span>
       <span class="k">new</span> <span class="n">SocketOptions</span><span class="o">()</span>
           <span class="o">.</span><span class="na">setReadTimeoutMillis</span><span class="o">(</span><span class="mi">3000</span><span class="o">)</span>
           <span class="o">.</span><span class="na">setConnectTimeoutMillis</span><span class="o">(</span><span class="mi">3000</span><span class="o">);</span>
</pre></div>
</div>
<p>Changing the client timeout options might have more impacts than expected, <strong>please make
sure to properly document before changing these options.</strong></p>
</div>
</div>
<div class="section" id="load-balancing">
<h2>Load Balancing<a class="headerlink" href="#load-balancing" title="Permalink to this headline">¶</a></h2>
<p>Both <em>Astyanax</em> and the <em>Java driver</em> connect to multiple nodes of the <em>Cassandra</em>
cluster. Distributing requests through all the nodes plays an important role in
the good operation of the <code class="docutils literal notranslate"><span class="pre">Cluster</span></code> and for best performances. With <em>Astyanax</em>,
requests (or “operations”) can be sent directly to replicas that have a copy of
the data targeted by the <em>“Row key”</em> specified in the operation. Since the <em>Thrift</em> API is
low-level, it forces the user to provide <em>Row keys</em>, known as the <code class="docutils literal notranslate"><span class="pre">TokenAware</span></code>
connection pool type. This setting is also present in the <em>Java driver</em>, however
the configuration is different and provides more options to tweak.</p>
<p>Load balancing in the <em>Java driver</em> is a <em>Policy</em>, it is a class that will be
plugged in the <em>Java driver</em>’s code and the Driver will call its methods when it
needs to. The <em>Java driver</em> comes with a preset of specific load balancing policies.
Here’s an equivalent code:</p>
<p><em>Astyanax</em>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">final</span> <span class="n">ConnectionPoolType</span> <span class="n">poolType</span> <span class="o">=</span> <span class="n">ConnectionPoolType</span><span class="o">.</span><span class="na">TOKEN_AWARE</span><span class="o">;</span>
<span class="kd">final</span> <span class="n">NodeDiscoveryType</span> <span class="n">discType</span> <span class="o">=</span> <span class="n">NodeDiscoveryType</span><span class="o">.</span><span class="na">RING_DESCRIBE</span><span class="o">;</span>
<span class="n">ConnectionPoolConfigurationImpl</span> <span class="n">cpool</span> <span class="o">=</span>
       <span class="k">new</span> <span class="n">ConnectionPoolConfigurationImpl</span><span class="o">(</span><span class="s">&quot;myConnectionPool&quot;</span><span class="o">)</span>
               <span class="o">.</span><span class="na">setLocalDatacenter</span><span class="o">(</span><span class="s">&quot;myDC&quot;</span><span class="o">)</span>
<span class="n">AstyanaxConfigurationImpl</span> <span class="n">aconf</span> <span class="o">=</span>
       <span class="k">new</span> <span class="n">AstyanaxConfigurationImpl</span><span class="o">()</span>
               <span class="o">.</span><span class="na">setConnectionPoolType</span><span class="o">(</span><span class="n">poolType</span><span class="o">)</span>
               <span class="o">.</span><span class="na">setDiscoveryType</span><span class="o">(</span><span class="n">discType</span><span class="o">)</span>
</pre></div>
</div>
<p><em>Java driver</em>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">LoadBalancingPolicy</span> <span class="n">lbp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TokenAwarePolicy</span><span class="o">(</span>
       <span class="n">DCAwareRoundRobinPolicy</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
       <span class="o">.</span><span class="na">withLocalDc</span><span class="o">(</span><span class="s">&quot;myDC&quot;</span><span class="o">)</span>
       <span class="o">.</span><span class="na">build</span><span class="o">()</span>
<span class="o">);</span>
</pre></div>
</div>
<p><em>By default</em> the <em>Java driver</em> will instantiate the exact Load balancing policy
shown above, with the <code class="docutils literal notranslate"><span class="pre">LocalDC</span></code> being the DC of the first host the driver connects
to. So to get the same behaviour than the <em>TokenAware</em> pool type of <em>Astyanax</em>,
users shouldn’t need to specify a load balancing policy since the default one
should cover it.</p>
<p>Important: Note that since <em>CQL</em> is an abstraction of the Cassandra’s architecture, a simple
query needs to have the <em>Row key</em> specified explicitly on a <code class="docutils literal notranslate"><span class="pre">Statement</span></code> in order
to benefit from the <em>TokenAware</em> routing (the <em>Row key</em> in the <em>Java driver</em> is
referenced as <em>Routing Key</em>), unlike the <em>Astyanax</em> driver.
Some differences occur related to the different kinds of <code class="docutils literal notranslate"><span class="pre">Statements</span></code> the <em>Java
driver</em> provides. Please see <a class="reference external" href="../../../manual/load_balancing/#token-aware-policy">this link</a>
for specific information.</p>
<p>Custom load balancing policies can easily be implemented by users, and supplied to
the <em>Java driver</em> for specific use cases. All information necessary is available
in the <a class="reference external" href="../../../manual/load_balancing">Load balaning policies docs</a>.</p>
</div>
<div class="section" id="consistency-levels">
<h2>Consistency levels<a class="headerlink" href="#consistency-levels" title="Permalink to this headline">¶</a></h2>
<p>Consistency levels can be set per-statement, or globally through the <code class="docutils literal notranslate"><span class="pre">QueryOptions</span></code>.</p>
<p><em>Astyanax</em>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">AstyanaxConfigurationImpl</span> <span class="n">aconf</span> <span class="o">=</span>
       <span class="k">new</span> <span class="n">AstyanaxConfigurationImpl</span><span class="o">()</span>
               <span class="o">.</span><span class="na">setDefaultReadConsistencyLevel</span><span class="o">(</span><span class="n">ConsistencyLevel</span><span class="o">.</span><span class="na">CL</span><span class="o">*</span><span class="n">ALL</span><span class="o">)</span>
               <span class="o">.</span><span class="na">setDefaultWriteConsistencyLevel</span><span class="o">(</span><span class="n">ConsistencyLevel</span><span class="o">.</span><span class="na">CL</span><span class="o">*</span><span class="n">ALL</span><span class="o">)</span>
</pre></div>
</div>
<p><em>Java driver</em>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">QueryOptions</span> <span class="n">qo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QueryOptions</span><span class="o">().</span><span class="na">setConsistencyLevel</span><span class="o">(</span><span class="n">ConsistencyLevel</span><span class="o">.</span><span class="na">ALL</span><span class="o">);</span>
</pre></div>
</div>
<p>Since the <em>Java driver</em> only executes <em>CQL</em> statements, which can be either reads
or writes to <em>Cassandra</em>, it is not possible to globally configure the
Consistency Level for only reads or only writes. To do so, since the Consistency
Level can be set per-statement, you can either set it on every statement, or use
<code class="docutils literal notranslate"><span class="pre">PreparedStatements</span></code> (if queries are to be repeated with different values): in
this case, setting the CL on the <code class="docutils literal notranslate"><span class="pre">PreparedStatement</span></code>, causes the <code class="docutils literal notranslate"><span class="pre">BoundStatements</span></code> to
inherit the CL from the prepared statements they were prepared from. More
informations about how <code class="docutils literal notranslate"><span class="pre">Statement</span></code>s work in the <em>Java driver</em> are detailed
in the <a class="reference external" href="../queries_and_results/">“Queries and Results” section</a>.</p>
</div>
<div class="section" id="authentication">
<h2>Authentication<a class="headerlink" href="#authentication" title="Permalink to this headline">¶</a></h2>
<p>Authentication settings are managed by the <code class="docutils literal notranslate"><span class="pre">AuthProvider</span></code> class in the <em>Java driver</em>.
It can be highly customizable, but also comes with default simple implementations:</p>
<p><em>Astyanax</em>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">AuthenticationCredentials</span> <span class="n">authCreds</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleAuthenticationCredentials</span><span class="o">(</span><span class="s">&quot;username&quot;</span><span class="o">,</span> <span class="s">&quot;password&quot;</span><span class="o">);</span>
<span class="n">ConnectionPoolConfigurationImpl</span> <span class="n">cpool</span> <span class="o">=</span>
       <span class="k">new</span> <span class="n">ConnectionPoolConfigurationImpl</span><span class="o">(</span><span class="s">&quot;myConnectionPool&quot;</span><span class="o">)</span>
               <span class="o">.</span><span class="na">setAuthenticationCredentials</span><span class="o">(</span><span class="n">authCreds</span><span class="o">)</span>
</pre></div>
</div>
<p><em>Java driver</em>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">AuthProvider</span> <span class="n">authProvider</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PlainTextAuthProvider</span><span class="o">(</span><span class="s">&quot;username&quot;</span><span class="o">,</span> <span class="s">&quot;password&quot;</span><span class="o">);</span>
</pre></div>
</div>
<p>The class <code class="docutils literal notranslate"><span class="pre">AuthProvider</span></code> can be easily implemented to suit the user’s needs,
documentation about the classes needed is <a class="reference external" href="../../../manual/auth/">available there</a>.</p>
</div>
<div class="section" id="hosts-and-ports">
<h2>Hosts and ports<a class="headerlink" href="#hosts-and-ports" title="Permalink to this headline">¶</a></h2>
<p>Setting the “seeds” or first hosts to connect to can be done directly on the
Cluster configuration Builder:</p>
<p><em>Astyanax</em>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">ConnectionPoolConfigurationImpl</span> <span class="n">cpool</span> <span class="o">=</span>
       <span class="k">new</span> <span class="n">ConnectionPoolConfigurationImpl</span><span class="o">(</span><span class="s">&quot;myConnectionPool&quot;</span><span class="o">)</span>
               <span class="o">.</span><span class="na">setSeeds</span><span class="o">(</span><span class="s">&quot;127.0.0.1&quot;</span><span class="o">)</span>
               <span class="o">.</span><span class="na">setPort</span><span class="o">(</span><span class="mi">9160</span><span class="o">)</span>
</pre></div>
</div>
<p><em>Java driver</em>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Cluster</span> <span class="n">cluster</span> <span class="o">=</span> <span class="n">Cluster</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
       <span class="o">.</span><span class="na">addContactPoint</span><span class="o">(</span><span class="s">&quot;127.0.0.1&quot;</span><span class="o">)</span>
       <span class="o">.</span><span class="na">withPort</span><span class="o">(</span><span class="mi">9042</span><span class="o">)</span>
</pre></div>
</div>
<p>The <em>Java driver</em> by default connects to port <em>9042</em>, hence you can supply only
host names with the <code class="docutils literal notranslate"><span class="pre">addContactPoints(String...)</span></code> method. Note that the contact
points are only the entry points to the <code class="docutils literal notranslate"><span class="pre">Cluster</span></code> for the <em>Automatic discovery
phase</em>.</p>
</div>
<div class="section" id="building-the-cluster">
<h2>Building the Cluster<a class="headerlink" href="#building-the-cluster" title="Permalink to this headline">¶</a></h2>
<p>With all options previously presented, one may configure and create the
<code class="docutils literal notranslate"><span class="pre">Cluster</span></code> object this way:</p>
<p><em>Java driver</em>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Cluster</span> <span class="n">cluster</span> <span class="o">=</span> <span class="n">Cluster</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
       <span class="o">.</span><span class="na">addContactPoint</span><span class="o">(</span><span class="s">&quot;127.0.0.1&quot;</span><span class="o">)</span>
       <span class="o">.</span><span class="na">withAuthProvider</span><span class="o">(</span><span class="n">authProvider</span><span class="o">)</span>
       <span class="o">.</span><span class="na">withLoadBalancingPolicy</span><span class="o">(</span><span class="n">lbp</span><span class="o">)</span>
       <span class="o">.</span><span class="na">withSocketOptions</span><span class="o">(</span><span class="n">so</span><span class="o">)</span>
       <span class="o">.</span><span class="na">withPoolingOptions</span><span class="o">(</span><span class="n">poolingOptions</span><span class="o">)</span>
       <span class="o">.</span><span class="na">withQueryOptions</span><span class="o">(</span><span class="n">qo</span><span class="o">)</span>
       <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="n">Session</span> <span class="n">session</span> <span class="o">=</span> <span class="n">cluster</span><span class="o">.</span><span class="na">connect</span><span class="o">();</span>
</pre></div>
</div>
</div>
<div class="section" id="best-practices">
<h2>Best Practices<a class="headerlink" href="#best-practices" title="Permalink to this headline">¶</a></h2>
<p>A few best practices are summed up in <a class="reference external" href="http://www.datastax.com/dev/blog/4-simple-rules-when-using-the-datastax-drivers-for-cassandra">this blog post</a>.</p>
<p>Concerning connection pools, the Java driver’s default settings should allow
most of the users to get the best out of the driver in terms of throughput,
they have been thoroughly tested and tweaked to accommodate the users’ needs.
If one still wishes to change those, first <a class="reference external" href="../../../manual/pooling/#monitoring-and-tuning-the-pool">Monitoring the pools</a> is
advised, then a <a class="reference external" href="../../../manual/pooling/">deep dive in the Pools management mechanism</a> should
provide enough insight.</p>
<p>A lot more options are available in the different <code class="docutils literal notranslate"><span class="pre">XxxxOption</span></code>s classes, policies are
also highly customizable since the base Java driver’s implementations can easily be
extended and implement user-specific actions.</p>
</div>
</div>
  <div class="content-navigation">
  <div class="navigation navigation--prev">
    <a class="navigation__link" href="../index.html">
      <button class="navigation__button">
        <i class="scylla-icon scylla-icon--chevron-left"></i>
      </button>
      <div class="navigation__title">
        <span class="colored">PREVIOUS</span> <br />Migrating from Astyanax
      </div>
    </a>
  </div>
  <div class="navigation navigation--next">
    <a class="navigation__link" href="../language_level_changes/index.html">
      <div class="navigation__title">
        <span class="colored">NEXT</span> <br />Language change : from Thrift to CQL
      </div>
      <button class="navigation__button">
        <i class="scylla-icon scylla-icon--chevron-right"></i>
      </button>
    </a>
  </div>
</div> 
      </div>
      <div
        class="sidebar-left  large-order-1"
      > <div id="side-nav" class="side-nav custom-scroll-bar" data-closable data-toggler=".show">
  <button class="collapsible-button">
    <i class="scylla-icon scylla-icon--chevron-left"></i>
  </button>
  <div class="side-nav-content">
    <div class="side-nav__search">
      <div class="search-box">
        <ci-search></ci-search>
      </div>
    </div>
    <div class="side-nav__versions">
       <ul
  class="dropdown menu scylla-dropdown scylla-dropdown--versions "
  data-dropdown-menu
>
  <li class="scylla-dropdown__item">
    <a class="scylla-dropdown__title" href="#">
       3.7.2.x 
      <i class="chevron scylla-icon scylla-icon--chevron-right"></i>
    </a>
    <ul class="menu scylla-dropdown__content"> 
      <li>
        <a href="index.html"
          >3.7.2.x</a
        >
      </li>
       
      <li>
        <a href="../../../../stable/index.html"
          >3.10.2.x</a
        >
      </li>
       
    </ul>
  </li>
</ul> 
    </div>
    <div class="side-nav__content">
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">Scylla Java Driver for Scylla and Apache Cassandra®</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api.html">API Documentation</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../manual/index.html">Manual</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../manual/address_resolution/index.html">Address resolution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../manual/async/index.html">Asynchronous programming</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../manual/auth/index.html">Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../manual/compression/index.html">Compression</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../manual/control_connection/index.html">Control connection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../manual/custom_codecs/index.html">Custom Codecs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../manual/custom_payloads/index.html">Custom Payloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../manual/idempotence/index.html">Query idempotence</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../manual/load_balancing/index.html">Load balancing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../manual/logging/index.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../manual/metadata/index.html">Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../manual/metrics/index.html">Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../manual/native_protocol/index.html">Native protocol</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../manual/object_mapper/index.html">Object Mapper</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../manual/object_mapper/creating/index.html">Definition of mapped classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../manual/object_mapper/custom_codecs/index.html">Using custom codecs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../manual/object_mapper/using/index.html">Using the mapper</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../manual/osgi/index.html">OSGi</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../manual/paging/index.html">Paging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../manual/pooling/index.html">Connection pooling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../manual/query_timestamps/index.html">Query timestamps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../manual/reconnection/index.html">Reconnection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../manual/retries/index.html">Retries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../manual/shaded_jar/index.html">Using the shaded JAR</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../manual/socket_options/index.html">Socket options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../manual/speculative_execution/index.html">Speculative query execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../manual/ssl/index.html">SSL</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../manual/statements/index.html">Statements</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../manual/statements/simple/index.html">Simple statements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../manual/statements/prepared/index.html">Prepared statements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../manual/statements/built/index.html">Built statements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../manual/statements/batch/index.html">Batch statements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../manual/tuples/index.html">Using Tuples with the Java driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../manual/udts/index.html">User-defined types</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../../index.html">Upgrade guide</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul class="current">
<li class="toctree-l2 current has-children"><a class="reference internal" href="../index.html">Migrating from Astyanax</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label for="toctree-checkbox-5"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul class="current">
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language_level_changes/index.html">Language change : from Thrift to CQL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../queries_and_results/index.html">Queries and Results</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq/index.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog/index.html">Changelog</a></li>
</ul>

    </div>
  </div>
</div>
      </div>
      
      <div class="sidebar-right large-order-3">
         <div class="secondary-side-nav custom-scroll-bar">
  <div class="secondary-side-nav__content">
    <p class="topic-title">On this page</p>
    <ul>
<li><a class="reference internal" href="#">Configuration</a><ul>
<li><a class="reference internal" href="#how-configuring-the-java-driver-works">How Configuring the Java driver works</a></li>
<li><a class="reference internal" href="#connection-pools">Connection pools</a><ul>
<li><a class="reference internal" href="#connections-pools-internals">Connections pools internals</a></li>
<li><a class="reference internal" href="#timeouts">Timeouts</a></li>
</ul>
</li>
<li><a class="reference internal" href="#load-balancing">Load Balancing</a></li>
<li><a class="reference internal" href="#consistency-levels">Consistency levels</a></li>
<li><a class="reference internal" href="#authentication">Authentication</a></li>
<li><a class="reference internal" href="#hosts-and-ports">Hosts and ports</a></li>
<li><a class="reference internal" href="#building-the-cluster">Building the Cluster</a></li>
<li><a class="reference internal" href="#best-practices">Best Practices</a></li>
</ul>
</li>
</ul>

  </div>
</div> 
      </div>
    </section>

    <footer class="footer">
  <div class="footer-group">
    <div class="footer-top">
      <a class="footer-logo" href="https://www.scylladb.com"
        ><img
          src="../../../_static/img/logo-scylla-horizontal-RGB.svg"
          alt="Logo"
      /></a>
      <div class="footer-links">
        <a class="footer-links__link" href="https://docs.scylladb.com/">Docs</a>
        <a
          class="footer-links__link"
          href="https://www.scylladb.com/company/contact-us/"
          >Contact Us</a
        >
        <a class="footer-links__link" href="https://www.scylladb.com/company/"
          >About Us</a
        >
      </div>
      <div class="footer-actions">
        <a
          class="footer-actions__link"
          href="https://groups.google.com/g/scylladb-users"
          target="_blank"
          ><span
            data-tooltip
            tabindex="1"
            title="User mailing list"
            data-position="bottom"
          >
            <img
              src="../../../_static/img/icons/icon-mail-list.svg"
              alt="Mail List Icon"
            />
          </span>
        </a>
        <a
          class="footer-actions__link"
          href="http://slack.scylladb.com/"
          target="_blank"
          ><span
            data-tooltip
            tabindex="1"
            title="User Slack channel"
            data-position="bottom"
          >
            <img
              src="../../../_static/img/icons/icon-slack.svg"
              alt="Slack Icon"
          /></span>
        </a>
      </div>
    </div>

    <div class="footer-bottom">
      <div class="footer-bottom__copyright"> &#169; 2022, ScyllaDB. All rights reserved.
      </div>
      <div class="footer-bottom__last-updated">
        Last updated on 07 February 2022.
      </div>
      <div class="footer-bottom__version">
        Powered by
        <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a> &amp;
        <a href="https://sphinx-theme.scylladb.com/"
          >ScyllaDB Theme 1.0.6</a
        >
      </div>
    </div>
  </div>
</footer>

    <noscript>
      <iframe
        src="https://www.googletagmanager.com/ns.html?id=GTM-T8P2JP"
        height="0"
        width="0"
        style="display: none; visibility: hidden"
      ></iframe>
    </noscript>
  </body>
</html>